

// Settings
@import "settings/reset";
@import "settings/mixins";
@import "settings/colors";
@import "settings/type";

// Resources
@import "resource/animations";
@import "resource/ui";
@import "resource/frames";
@import "resource/loader";

// Layout
@import "layout/nav";
@import "layout/header";
@import "layout/tagline";
@import "layout/wall";
@import "layout/work";
@import "layout/about";
@import "layout/contact";
@import "layout/project";



// Base styles
// ------------------------------------------------------------

	html {
		height: 100%;
		font-size: 100%;
		background: $lgt-d;
		-webkit-font-smoothing: antialiased;
		-moz-font-smoothing: antialised;
		-ms-font-smoothing: antialised;
		-o-font-smoothing: antialised;
		font-smoothing: antialiased;
	}
	body {
		position: relative;
		width: 100%;
		min-width: 320px;
		max-width: 1600px;
		height: 100%;
		margin: auto;
		color: $blk;
		font-family: $serif;
		font-size: $basefont;
		line-height: $baseline;
	}
	section {
		position: relative;
		z-index: 2;
		width: 100%;
		min-width: 320px;
		max-width: 1600px;
		margin: auto;
		@include padding-x(5%);
		overflow: hidden;
		.head {
			position: relative;
			width: 100%;
			@include leader(16);
			@include trailer(7);
			text-align: center;
			@include trans(.5s);
			h5 {
				display: inline-block;
				color: $blk-7;
				&::after {
					content:'';
					position: absolute;
					bottom: -15px;
					left: 50%;
					width: 50px;
					height: 3px;
					margin-left: -25px;
					background: $blk-6;
				}
			}
		}
		h5 {
			@extend .caps;
			letter-spacing: 0.08em;
		}
	}
	.base {
		position: fixed;
		top: 0;
		bottom: 0;
		z-index: -1;
		width: 100%;
		min-width: 320px;
		max-width: 1600px;
		margin: auto;
		box-shadow: 18px 0 $blk-1, 1px 0 $blk-1, -18px 0 $blk-1, -1px 0 $blk-1;
		background: $red;
		@include trans(.5s);
	}


// Page transitions
// ------------------------------------------------------------

	.twrap {
		position: relative;
		z-index: 2;
		width: 100%;
		min-width: 320px;
		max-width: 1600px;
		height: 100%;
		margin: auto;
		box-shadow: 0 0 20px $blk-0;
		@include trans(.75s);
		@include ttimingcb(.3, .7, .3, .7);
		@include animate(.75s);
		@include atimingcb(.3, .7, .3, .7);
	}
	.underlay {
		display: none;
		position: fixed;
		z-index: 0;
		top: 0;
		width: 100%;
		max-width: 1600px;
		height: 100%;
		background: $blk-4;
		@include animate(1s);
		@include fadeout;
	}
	.navslide {
		display: none;
		position: fixed;
		z-index: 999;
		top: 0;
		width: 100%;
		max-width: 1600px;
		height: 100%;
		overflow: hidden;
		.slide {
			display: none;
			position: relative;
			z-index: 999;
			width: 100%;
			height: 100%;
			box-shadow: 0 0 30px $blk-0;
			@include animate(.75s, .25s);
			@include atimingcb(.8, .2, .8, .4);
		}
		.pslide {
			background: $wht;
		}
		.hslide {
			background: $red;
		}
		.overlay {
			position: fixed;
			z-index: 998;
			top: 0;
			width: 100%;
			max-width: 1600px;
			height: 100%;
			background: $blk-4;
			@include animate(.75s);
			@include fadein;
		}
	}


// page out
	body.out {
		.navslide {
			display: block;
			.slide {
				box-shadow: 0 0 30px $blk-3;
			}
		}
		.about, .aboutme, .contact {
			display: none;
		}
		&.next {
			.navslide {
				.pslide {
					display: block;
					@include slideinright;
				}
			}
		}
		&.prev {
			.navslide {
				.pslide {
					display: block;
					@include slideinleft;
				}
			}
		}
		&.return {
			.navslide {
				.hslide {
					display: block;
					@include slideinleft;
				}
			}
		}
	}

// page out (from top)
	body.out:not(.fold), body.out.return:not(.fold) {
		.twrap {
			box-shadow: 0 0 20px $blk-2;
			@include zoomout;
		}
		.underlay {
			display: block;
			@include animate(.75s);
			@include fadein;
		}
		.about, .aboutme, .contact, .project:not(':first-of-type'), .visual, .next {
			display: none;
		}
		&.home {
			header {
				background: $red;
				@include trans(0s);
			}
		}
	}

// next project
	body.fold.out.next {
		&.home {
			header .wrap, .head, .project, {
				@include tmove(-150px, 0);
				@include trans(1s);
				@include ttimingcb(.9, .1, .8, .4);
			}
		}
		&.project {
			.wrap, .head, .itemhead, .project, .visual, .detail, .footlink, .next {
				@include tmove(-150px, 0);
				@include trans(1s);
				@include ttimingcb(.9, .1, .8, .4);
			}
			.overview .detail {
				@include treset;
			}
		}
	}

// previous project & return home
	body.fold.out.prev, body.fold.out.return {
		&.home {
			header .wrap, .head, .project, {
				@include tmove(150px, 0);
				@include trans(1s);
				@include ttimingcb(.9, .1, .8, .4);
			}
		}
		&.project {
			header .wrap, .head, .itemhead, .project, .overview, .visual, .detail, .footlink, .next {
				@include tmove(150px, 0);
				@include trans(1s);
				@include ttimingcb(.9, .1, .8, .4);
			}
			.overview .detail {
				@include treset;
			}
		}
	}

@media screen and (min-width: 1661px) {
	body.fold.out.next, body.fold.out.prev, body.fold.out.return {
		&.project {
			section.next {
				@include treset;
			}			
		}
	}
}


// Fold transitions
// ------------------------------------------------------------

	body.fold {
		header {
			.wrap {
				opacity: .3;
				@include tscale(.92);
			}
		}
		.arrow {
			@include trans(.25s);
		}
		section.wall {
			.wall {
				opacity: 1;
				@include trans(.8s);
			}
		}
	}

	body.foldb {
		.base {
			background: $wht;
			@include trans(0s);
		}
		header {
			background: none;
			@include trans(0s);
			.splash, .fade {
				display: none;
			}
		}
	}

	body.home.fold {
		.base {
			background: $red-d;
			@include trans(.25s);
		}
		.arrow {
			@include arrow(27px, $red-d);
		}
	}
	body.home.foldb {
		section.wall {
			.wall {
				position: fixed;
				bottom: 0;
				.fade {
					display: block;
				}
			}
		}
	}


// Media queries
// ------------------------------------------------------------

	@media screen and (min-width: 1601px) {
		section {
			@include padding-x(6.5%);
		}
	}
	@media screen and (max-width: 959px) {
		.base {
			z-index: -9;
		}
		section.work, section.about, section.aboutme, section.contact {
			z-index: 9;
		}
		section {
			@include padding-x(5%);
			.head {
				@include leader(12);
				@include trailer(6);
			}
		}
	}
	@media screen and (max-width: 640px) {
		section {
			@include padding-x(2%);
			.head {
				@include leader(8);
				@include trailer(2);
				h5 {
					font-size: 18px;
					&::after {
						bottom: -9px;
						width: 40px;
						height: 3px;
						margin-left: -20px;
					}
				}
			}
		}
	}
